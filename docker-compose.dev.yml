# Trusted Services Framework - Development with Generic Test Client
# Use this for framework development and testing with the Streamlit test client

services:
  # Backend - extends from base docker-compose.yml
  backend:
    extends:
      file: docker-compose.yml
      service: backend
    container_name: trusted-services-backend-dev

  # Generic Streamlit Test Client
  streamlit-client:
    build:
      context: .
      dockerfile: Dockerfile.streamlit
    container_name: trusted-services-test-client-dev
    ports:
      - "8501:8501"
    environment:
      - PYTHONUNBUFFERED=1
      - STREAMLIT_SERVER_ADDRESS=0.0.0.0
      - STREAMLIT_SERVER_PORT=8501
    depends_on:
      backend:
        condition: service_healthy
    volumes:
      - ./runtime:/app/runtime
      - ./runtime_dev:/app/runtime_dev
    restart: unless-stopped
